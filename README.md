## **사용된 언어**
|                |                                               |
|----------------|-----------------------------------------------|
| 언어           | Python, Html, Javascript                      |
| 툴             | Visual Studio Code, SQLite                    |
| 라이브러리     | Flask, Bootstrap, Jquery, Summernote, Ajax    |
| 제작 기간      | 2020-03-06 ~ 2020-03-20 (14일)                |
| 제작 인원      | 1명                                           |
| 도움을 받은 곳 | 구글                                          |
| 서비스 한 곳   | Google Cloud Platform (현재는 돈 문제로 내림) |

<br>

## **프로젝트 설명**
### **개요**
3월 한달 동안 GCP로 마인크래프트 서버를 운용하면서 개인 홈페이지도 하나 만들고 싶어졌다.

목적은 서버 공지사항을 편하게 관리하기 위해서, 그리고 유저들이 자유롭게 게시글을 올리고 게임 스샷을 올려 추억을 공유하기 위해서이다.

이 프로젝트를 진행하면서, 처음으로 풀스택 개발을 진행하게 되었다. 처음만든 풀스택 페이지다 보니, 이리저리 해메는게 참 많았다. 그래서 코드가 정렬하지 못하고 app.py 파일도 분할되지 못하고 통으로 합쳐져 버렸다. 남들에게 잘 정갈된 페이지를 보여주고 싶어서 bootstrap의 양식을 많이 이용했다. 아니, 거의 bootstrap으로 만들어져있다. 어떤 기능을 위한 UI를 찾으려고 할때마다 bootstrap의 공식 위키 페이지를 뒤적거리며 찾았으니까. 

그러면서 bootstrap, flask, jquery, summernote, ajax, sqlite에 대한 사용법을 숙지하게 되었으며, 특히 bootstrap과 splite를 중점으로 사용하게 되면서 여전보다 깊이 있는 지식을 얻게 되었다. 

또한, post방식과 get방식의 차이와 사용방법을 숙지하게 되면서 http방식의 통신을 이해하는데 큰 도움이 되었고, ajax를 활용하면서 하나의 페이지 안에서 새로고침하지 않고(화면이 깜빡이지 않고) 페이지를 불러오는 방법을 터특하게 되었다.

<br>

### **아쉬운 점과 개선해야하는 점**
가장 고전을 겪은 곳은 관리자 페이지의 관리자 아이디 비밀번호 세션이었다. 원래는 기존에 사용하던 사용자용 페이지 html파일들을 같이 사용하고 싶었는데, 관리자 페이지에서 이동하면서 계속해서 세션을 비교해줘야 해서 전부 따로 만들었다. 문제가 사용자가 마음먹고 주소창에 어드민 페이지 url를 입력하게 되면 만약 세션비교를 하지 않으면 그냥 접속이 되어버린다는 건데. 

그런데, 지금 생각해보니 중복파일을 모두 없애고 세션 비교하는 html파일을 만든 다음 백엔드에서 GET방식으로 페이지 index를 쏘고 로그인할때 세션에 저장된 아이디, 비밀번호를 비교하고 맞으면 페이지 index를 이용하여 리다이렉트를 하던 ajax 방식으로 불러오던 하면 될거 같기도하다. 

또한, 사용자들의 비밀번호 안전을 위해 python 내부의 hashlib.sha256 암호화를 사용하여 암호를 걸어놓고 게시글을 삭제할때 입력했던 비밀번호를 서버에 보내고 암호화하여 서로 비교하는 방식을 택했다. 다만, 아쉬운 점이 있다면 서버에 post 방식으로 보내기 전에 암호화를 하고 서버에선 비교만 했어야했는데, 그러지 못하고 서버에 보낸 다음에 서버에서 암호화를 했으니 중간에 가로채기만 한다면 바로 원본을 얻을 수 있다는 점이었다. 

그래서 회원가입 기능은 넣지않고 게시글을 올릴때마다 길이 제한없는 임시 비밀번호를 입력할 수 있도록 하고 게시글을 삭제하고 싶다면 그 비밀번호를 입력하고 지울 수 있도록 변경했다. 다음에 만들땐, 무조건 홈페이지에서 암호화를 끝마치고 서버에 보내고 그것을 저장하거나 비교할 수 있도록 만들어야한다.

<br>

## **Files**
- app.py
    - flask 백엔드 파일
    - 백엔드에서 처리되는 모든 코드를 하나의 파일로 통합해 놓았다.
    - 정규화를 사용하여 post 방식으로 들어온 게시글에 이상한 문자가 없는지 확인.
    - sha256 암호화를 사용하여 사용자들의 비밀번호를 암호화하고 DB에 저장
- /templates/
    - /admin/ : 어드민 페이지 폴더
        - admin-home.html : 관리자 메인 페이지
        - admin-login.html : 관리자 로그인 페이지
        - forum.html : 관리자 게시글 페이지
        - notice.html : 관리자 공지사항 페이지
        - page.html : DB에서 게시판과 공지사항을 불러오기 위해서 만든 파일.
        - question.html : 사용자들이 보낸 문의사항을 표로 보여주고 싶었지만 완성되지 못한 페이지
        - viewer.html : 게시판과 공지 사항에서 게시글을 클릭하면 게시글을 보여주는 페이지
        - write.html : 공지 사항에 게시글을 작성할 수 있게 해주는 페이지. Summernote를 사용하였다.
    - error.html : 에러 표시 페이지
    - index.html : 처음 들어가면 보이는 페이지
    - index2.html : 여러 페이지를 ajax 형태로 불러올때 사용하는 껍데기 페이지. 이 아래의 모든 파일은 index2.html의 contents div에 로드된다.
    - intro.html : index2.html 페이지를 불러오면 가장 처음 로드되는 사이트 및 서버 소개 페이지
    - forum.html : 게시판 페이지
    - notice.html : 공지 사항 페이지
    - page.html : DB에서 게시판과 공지사항을 불러오기 위해서 만든 파일.
    - info.html : 마인크래프트 EULA 정책 페이지
    - map.html : 마인크래프트 플러그인 중 외부 dynmap 페이지를 iframe으로 불러오는 페이지
    - open.html : 마인크래프트 서버가 오픈되어있는지 알려주는 페이지
    - question.html : 서버 문의사항을 작성할 수 있도록 만든 페이지
    - q_send.html : 문의사항을 모두 작성하면 표시해주는 페이지
    - viewer.html : 게시판과 공지 사항에서 게시글을 클릭하면 게시글을 보여주는 페이지
    - write.html : 게시판에 게시글을 작성할 수 있게 해주는 페이지. Summernote를 사용하였다.
- /static/
    - /css/
        - admin-login.css : 외부에서 따온 양식을 저장한 css 파일
        - index.css : index 페이지의 css 파일
    - /img/
        - mining.png : 서버 index 페이지에서 보여주기 위한 이미지 파일
- /module/
    - database.py : SQLite와 연결할 수 있도록 만든 python class
    - ShrimpServer.py : 마인크래프트 서버와 연결할 수 있도록 만든 python class
- /files/uploads/
    - 게시글과 공지사항에 업로드되는 사진을 모아놓는 폴더